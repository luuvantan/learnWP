if (self.CavalryLogger) { CavalryLogger.start_js(["dMAJP"]); }

__d("CovercardArrow",["csx","cx","ContextualDialogArrow","CSS","DOMQuery","Locale","Style"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=-45,j=45,k=9;b("Locale").isRTL()&&(i=-i,j=-j);a=function(){"use strict";__p&&__p();function a(a){this._layer=a}var c=a.prototype;c.enable=function(){__p&&__p();this._layer.enableBehavior(b("ContextualDialogArrow"));var a=this._layer.getContentRoot();this._arrowWrapper=b("DOMQuery").scry(a,"._ttk")[0];if(!this._arrowWrapper)return;this._arrowShadow=b("DOMQuery").scry(this._arrowWrapper,"._7li")[0];if(!this._arrowShadow)return;var c=null;l(this._arrowWrapper)&&(c=this._renderArrowWithRotate.bind(this));if(!c)return;b("Locale").isRTL()&&b("CSS").addClass(a,"_7lf");this._subscription=this._layer.subscribe("reposition",function(d,e){d=e.getPosition()=="below";b("CSS").conditionClass(a,"_53ih",d);d&&c(e)})};c.disable=function(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null};c._calculateArrowOffset=function(a){var c=b("ContextualDialogArrow").getOffsetPercent(a);a=b("ContextualDialogArrow").getOffset(a,c,this._layer);var d=b("Style").get(this._layer.getContentRoot(),"width");return parseInt(d,10)*(c/100)+a};c._renderArrowWithRotate=function(a){__p&&__p();var c=b("DOMQuery").scry(this._arrowWrapper,"._7lj")[0];if(!c){var d=this._layer.getContentRoot();b("CSS").addClass(d,"_2uy0")}d=b("DOMQuery").scry(this._arrowWrapper,"._1ubp")[0];if(!d)return;var e=l(this._arrowWrapper);if(!e)return;a=this._calculateArrowOffset(a);a=k+a;var f=-k;b("Locale").isRTL()&&(a=-a,f=-f);this._arrowWrapper.style[e]="translate("+a+"px, -"+k+"px) rotate("+j+"deg)";c&&(c.style[e]="rotate("+i+"deg) translate("+-a+"px, "+(k-12)+"px)");d.style[e]="rotate("+i+"deg) translate("+f+"px, 0)"};return a}();function l(a){a||(a=document.body);var b=["transform","WebkitTransform","msTransform","MozTransform","OTransform"],c;while(c=b.shift())if(a.style[c]!==void 0)return c;return null}e.exports=a}),null);
__d("WorkIntegrationTileCTAController",["Event"],(function(a,b,c,d,e,f){a={stopPropagation:function(a){b("Event").listen(a,"click",function(a){a.stopPropagation()})}};e.exports=a}),null);
__d("WorkIntegrationTileRetryCTAController",["Event","Popup"],(function(a,b,c,d,e,f){__p&&__p();var g="popup_target_install_integration";a={openPopupOnSubmit:function(a){b("Event").listen(a,"click",function(c){b("Popup").open("",700,700,g);a.target=g;a.submit();setTimeout(function(){window.location.reload()},3e3);return!1})}};e.exports=a}),null);
__d("XWorkIntegrationsSpinnerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/admin/loading/",{})}),null);
__d("XWorkRefreshAppUIInstallStateAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/update_app_ui_state/",{})}),null);
__d("WorkAdminPanelIntegrationsDialog",["AsyncRequest","Popup","URI","XWorkIntegrationsSpinnerController","XWorkRefreshAppUIInstallStateAsyncController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="work_app_install_popup";a={openPopup:function(){b("Popup").open(b("XWorkIntegrationsSpinnerController").getURIBuilder().getURI(),700,700,h)},redirectPopup:function(a){var c=window.open("",h);c!=void 0&&c.closed===!1&&(g||(g=b("URI"))).goURIOnWindow(a,c,!0)},thirdPartyPopupInstallDone:function(a){var b=window.opener;b&&b.workUpdateAppInstallStateByInstallID&&b.workUpdateAppInstallStateByInstallID(a);window.close()},registerUpdateAppInstallStateUICallback:function(){window.workUpdateAppInstallStateByInstallID=function(a){var c=b("XWorkRefreshAppUIInstallStateAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({install_id:a}).send()}}};e.exports=a}),null);
__d("WorkAdminThirdPartyAppDialogController",["AsyncRequest","CurrentCommunity","DialogX","Event","Popup","URI","XWorkRefreshAppUIInstallStateAsyncController","goURI"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.listenForInstallSubmitWithPopup=function(){var a=this;b("Event").listen(this.$1.getRoot(),"submit",function(c){b("Popup").open("",700,700,"work_app_install_popup");c=c.srcElement||c.target;c.target="work_app_install_popup";a.$3()})};c.$3=function(){var a=this.$2;setTimeout(function(){var c=(g||(g=b("URI"))).getRequestURI(),d=c.getQueryData();d.installed_app=a;delete d.state;c=c.setQueryData(d);b("goURI")(c)},3e3)};a.createForInstallDialogWithPopup=function(b,c){b=new a(b,c);b.listenForInstallSubmitWithPopup()};a.thirdPartyPopupInstallDone=function(){var a=window.opener;a&&a.workUpdateAppInstallState&&a.workUpdateAppInstallState();window.close()};a.registerUpdateAppInstallStateUICallback=function(){var a=(g||(g=b("URI"))).getRequestURI().getQueryData().installed_app;if(!a)return;window.workUpdateAppInstallState=function(){var c=b("XWorkRefreshAppUIInstallStateAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({app_id:a,group_id:b("CurrentCommunity").getID()}).send()}};return a}();e.exports=a}),null);
__d("WorkAppsSection",["URI"],(function(a,b,c,d,e,f){var g;a={scrollToSelectedIntegrationType:function(){var a=(g||(g=b("URI"))).getRequestURI().getFragment();if(a){var c=document.getElementById(a);c&&window.setTimeout(function(){c.scrollIntoView({behavior:"smooth"})},0)}}};e.exports=a}),null);
__d("XWorkInstallContentAppController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/admin/content_apps/access_token/",{})}),null);
__d("XWorkInstallContentAppDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/admin/content-app/install/",{app_type:{type:"Enum",required:!0,enumType:1},source:{type:"Enum",defaultValue:"UNKNOWN",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("WorkContentApp",["cx","AsyncRequest","CSS","Event","Popup","URI","XWorkInstallContentAppController","XWorkInstallContentAppDialogController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;a={autoOpenOAuthPopup:function(){var a=new(h||(h=b("URI")))(window.location);a=a.getQueryData().app_type;if(!a)return;a=b("XWorkInstallContentAppDialogController").getURIBuilder().setEnum("app_type",a).setEnum("source","URL_REFERER").getURI();new(b("AsyncRequest"))(a).send()},openOAuthPopup:function(a,c,d){b("Event").listen(a,"click",function(){i(c,{type:d})})},installBox:function(a,c,d){__p&&__p();b("Event").listen(c,"keyup",function(c){b("CSS").conditionClass(a,"_42fr",!c.target.value.trim().length>0),b("CSS").addClass(d,"hidden_elem")}),b("Event").listen(a,"click",function(){var e=c.value;if(!e.length)return;b("CSS").addClass(a,"_42fr");c.setAttribute("disabled","true");var f=b("XWorkInstallContentAppController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(f).setData({subject_id:e,type:"BOX"}).setHandler(function(a){(h||(h=b("URI"))).getRequestURI().removeQueryData("app_id").go(!0)}).setErrorHandler(function(){b("CSS").removeClass(a,"_42fr"),b("CSS").removeClass(d,"hidden_elem"),c.removeAttribute("disabled")}).setMethod("POST").send()})},installConcur:function(a,c,d,e,f){__p&&__p();var g,i=function(){b("CSS").conditionClass(a,"_42fr",!c.value||!d.value||!e.value)};(g=b("Event")).listen(c,"keyup",i);g.listen(d,"keyup",i);g.listen(e,"keyup",i);g.listen(a,"click",function(){__p&&__p();var g=c.value,i=d.value,j=e.value;if(!g||!i||!j)return;b("CSS").addClass(a,"_42fr");c.setAttribute("disabled","true");d.setAttribute("disabled","true");e.setAttribute("disabled","true");var k=b("XWorkInstallContentAppController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(k).setData({client_id:g,client_secret:i,refresh_token:j,type:"CONCUR"}).setHandler(function(a){(h||(h=b("URI"))).getRequestURI().removeQueryData("app_id").go(!0)}).setErrorHandler(function(){b("CSS").removeClass(a,"_42fr"),b("CSS").removeClass(f,"hidden_elem"),c.removeAttribute("disabled"),d.removeAttribute("disabled"),e.removeAttribute("disabled")}).setMethod("POST").send()})},installQuip:function(a,c,d,e){__p&&__p();var f=function(){b("CSS").conditionClass(a,"_42fr",!c.value||!d.value)};b("Event").listen(c,"keyup",f);b("Event").listen(d,"keyup",f);b("Event").listen(a,"click",function(){var f=c.value,g=d.value;if(!f||!g)return;b("CSS").addClass(a,"_42fr");c.setAttribute("disabled","true");d.setAttribute("disabled","true");var j=new(h||(h=b("URI")))(e).addQueryData("client_id",f).toString();i(j,{type:"QUIP",client_id:f,client_secret:g})})},installTrello:function(a,c){b("Event").listen(a,"click",function(){window.workContentAppsOAuthCallback=function(a,c){c=b("XWorkInstallContentAppController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({type:"TRELLO",access_token:a}).setHandler(function(a){(h||(h=b("URI"))).getRequestURI().removeQueryData("app_id").go(!0)}).setMethod("POST").send()},b("Popup").open(c,700,700)})}};function i(a,c){window.workContentAppsOAuthCallback=function(a){var d=b("XWorkInstallContentAppController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData(babelHelpers["extends"]({},c,{code:a})).setHandler(function(a){(h||(h=b("URI"))).getRequestURI().removeQueryData("app_id").go(!0)}).setMethod("POST").send()},b("Popup").open(a,700,700)}e.exports=a}),null);
__d("XWorkSeenRequestInstallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/admin/apps/request_install/seen/",{app_id:{type:"FBID"},mark_all:{type:"Bool",defaultValue:!1}})}),null);
__d("WorkRequestInstallController",["AsyncRequest","CSS","Event","XWorkSeenRequestInstallController"],(function(a,b,c,d,e,f){a={markRequestsAsSeen:function(a,c,d,e){b("Event").listen(a,"click",function(a){Array.from(c.getElementsByClassName(d)).forEach(function(a){b("CSS").removeClass(a,d)});a=b("XWorkSeenRequestInstallController").getURIBuilder();e!==null&&e!==void 0?a.setFBID("app_id",e):a.setBool("mark_all",!0);new(b("AsyncRequest"))(a.getURI()).setMethod("POST").send()})}};e.exports=a}),null);